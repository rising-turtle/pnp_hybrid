% Generated using GBSolver generator v1.1 Copyright Martin Bujnak,
% Zuzana Kukelova, Tomas Pajdla CTU Prague 2008.
% 
% Please refer to the following paper, when using this code :
%     Kukelova Z., Bujnak M., Pajdla T., Automatic Generator of Minimal Problem Solvers,
%     ECCV 2008, Marseille, France, October 12-18, 2008

function [w b d c meta M] = p4pf_quat2_wdcb(u11, X11)

    meta = {};

	%monomials appearing in matrix M:
	%    d*b^3*w^2 d^3*b^2*w d^4*b*w d^5*w c*d*b^2*w^2 c*d*b^3*w c*d^2*b^2*w c*d^3*b*w c*d^4*w c^2*d*b*w^2 c^2*d*b^2*w 
	%    c^2*d^2*b*w c^2*d^3*w c^3*d*b*w c^3*d^2*w c^4*d*w b^3*w^2 b^4*w d*b^2*w^2 d*b^3*w d^2*b*w^2 d^2*b^2*w 
	%    d^2*b^3 d^3*b*w d^3*b^2 d^4*w d^4*b d^5 c*b^2*w^2 c*b^3*w c*b^4 c*d*b*w^2 c*d*b^2*w 
	%    c*d*b^3 c*d^2*w^2 c*d^2*b*w c*d^2*b^2 c*d^3*w c*d^3*b c*d^4 c^2*b^2*w c^2*b^3 c^2*d*w^2 c^2*d*b*w 
	%    c^2*d*b^2 c^2*d^2*w c^2*d^2*b c^2*d^3 c^3*b*w c^3*b^2 c^3*d*w c^3*d*b c^3*d^2 c^4*w c^4*b 
	%    c^4*d c^5 b^2*w^2 b^3*w b^4 d*b*w^2 d*b^2*w d*b^3 d^2*b*w d^2*b^2 d^3*w 
	%    d^3*b d^4 c*b^2*w c*b^3 c*d*w^2 c*d*b*w c*d*b^2 c*d^2*w c*d^2*b c*d^3 c^2*b*w 
	%    c^2*b^2 c^2*d*w c^2*d*b c^2*d^2 c^3*w c^3*b c^3*d c^4 b^2*w b^3 d*b*w 
	%    d*b^2 d^2*w d^2*b d^3 c*b*w c*b^2 c*d*w c*d*b c*d^2 c^2*w c^2*b 
	%    c^2*d c^3 b*w b^2 d*w d*b d^2 c*w c*b c*d c^2 
	%    w b d c 1 
	M = zeros(113, 115);
	M([98, 210, 322, 547, 659, 771, 883, 1108, 1220, 1332, 1557, 2084, 2196, 2308, 2420, 2645, 3548, 3660, 3998, 4901, 6797, 6909, 7134, 8037, 9834]) = 2*u11(4);
	M([2019, 2583, 2808, 3372, 3484, 3822, 4160, 4611, 4723, 5061, 5625, 6604, 6716, 6941, 7053, 7278, 7729, 7841, 8179, 8743, 9622, 9734, 9959, 10523, 11529]) = -u11(4);
	M([2471, 3035, 3147, 4050, 4162, 4387, 4499, 5176, 5288, 5400, 5964, 7169, 7281, 7393, 7505, 7617, 8294, 8406, 8518, 9082, 10074, 10186, 10298, 10862, 11868]) = u11(4);
	M([3262, 4052, 4277, 4614, 4952, 5177, 5514, 5739, 6077, 7733, 7958, 8070, 8295, 8632, 8857, 9195, 10412, 10637, 10975, 11981]) = -2*u11(4);
	M([3375, 4165, 4390, 4615, 4727, 5065, 5290, 5515, 5627, 5852, 6190, 7734, 7846, 8071, 8183, 8408, 8633, 8745, 8970, 9308, 10413, 10525, 10750, 11088, 12094]) = 2*u11(3)-2;
	M([4618, 5295, 5407, 5519, 5631, 5856, 5968, 6080, 6192, 6304, 6416, 8638, 8750, 8862, 8974, 9086, 9198, 9310, 9422, 9534, 10978, 11090, 11202, 11314, 12320]) = u11(4);
	M([6991, 7555, 7667, 8118, 8230, 8455, 8567, 8905, 9017, 9129, 9467, 9881, 9993, 10105, 10217, 10329, 10667, 10779, 10891, 11229, 11656, 11768, 11880, 12218, 12659]) = 2*u11(3)-2;
	M([9703, 10267, 10379, 10491, 10603, 10828, 10940, 11052, 11164, 11276, 11388, 11463, 11575, 11687, 11799, 11911, 12023, 12135, 12247, 12359, 12447, 12559, 12671, 12783, 12885]) = -u11(4);
	M([108, 220, 332, 557, 669, 781, 893, 1231, 1343, 1568, 2093, 2205, 2317, 2429, 2654, 3557, 3669, 4007, 4910, 6801, 6913, 7138, 8041, 9835]) = 2*X11(7)*u11(6);
	M([560, 898, 1010, 1122, 1234, 1346, 1458, 1570, 1682, 1794, 3562, 3674, 3899, 4011, 4236, 4800, 4912, 5137, 5701, 7931, 8043, 8268, 8832, 10626]) = 2*u11(6)*X11(8);
	M([1916, 2480, 2705, 3269, 3381, 3719, 4057, 4621, 4959, 5523, 6500, 6612, 6837, 6949, 7174, 7737, 8075, 8639, 9625, 9850, 10414, 11417]) = 2*u11(6)*X11(8);
	M([2029, 2593, 2818, 3382, 3494, 3832, 4170, 4734, 5072, 5636, 6613, 6725, 6950, 7062, 7287, 7738, 7850, 8188, 8752, 9626, 9738, 9963, 10527, 11530]) = -u11(6)+X11(8);
	M([2481, 3045, 3157, 4060, 4172, 4397, 4509, 5299, 5411, 5975, 7178, 7290, 7402, 7514, 7626, 8303, 8415, 8527, 9091, 10078, 10190, 10302, 10866, 11869]) = X11(8)+u11(6);
	M([3272, 4062, 4287, 4624, 4962, 5187, 5525, 5750, 6088, 7742, 7967, 8079, 8304, 8641, 8866, 9204, 10416, 10641, 10979, 11982]) = -2*X11(7)*u11(6);
	M([3385, 4175, 4400, 4625, 4737, 5075, 5300, 5638, 5863, 6201, 7743, 7855, 8080, 8192, 8417, 8642, 8754, 8979, 9317, 10417, 10529, 10754, 11092, 12095]) = 2*u11(3)/u11(4)*u11(6)-2*X11(7);
	M([4628, 5305, 5417, 5529, 5641, 5866, 5978, 6203, 6315, 6427, 8647, 8759, 8871, 8983, 9095, 9207, 9319, 9431, 9543, 10982, 11094, 11206, 11318, 12321]) = u11(6)-X11(8);
	M([7001, 7565, 7677, 8128, 8240, 8465, 8577, 9028, 9140, 9478, 9890, 10002, 10114, 10226, 10338, 10676, 10788, 10900, 11238, 11660, 11772, 11884, 12222, 12660]) = 2*u11(3)/u11(4)*u11(6)-2*X11(7);
	M([9713, 10277, 10389, 10501, 10613, 10838, 10950, 11175, 11287, 11399, 11472, 11584, 11696, 11808, 11920, 12032, 12144, 12256, 12368, 12451, 12563, 12675, 12787, 12886]) = -u11(6)-X11(8);
	M([222, 1992, 2443, 2555, 2780, 3344, 3456, 3794, 4132, 4583, 4695, 5033, 5597, 6584, 6696, 6921, 7033, 7258, 7709, 7821, 8159, 8723, 9614, 9726, 9951, 10515, 11527]) = -u11(5)*X11(8)+u11(6)-X11(7)*u11(6);
	M([448, 2444, 2895, 3007, 3119, 4022, 4134, 4359, 4471, 5148, 5260, 5372, 5936, 7149, 7261, 7373, 7485, 7597, 8274, 8386, 8498, 9062, 10066, 10178, 10290, 10854, 11866]) = -u11(5)*X11(8)-u11(6)+X11(7)*u11(6);
	M([900, 3348, 4025, 4137, 4362, 4587, 4699, 5037, 5262, 5487, 5599, 5824, 6162, 7714, 7826, 8051, 8163, 8388, 8613, 8725, 8950, 9288, 10405, 10517, 10742, 11080, 12092]) = -2*u11(3)/u11(4)*u11(6)-2*u11(6)*X11(8)+2*X11(7)*u11(5);
	M([1465, 4591, 5155, 5267, 5379, 5491, 5603, 5828, 5940, 6052, 6164, 6276, 6388, 8618, 8730, 8842, 8954, 9066, 9178, 9290, 9402, 9514, 10970, 11082, 11194, 11306, 12318]) = -u11(6)+X11(7)*u11(6)+u11(5)*X11(8);
	M([2934, 6964, 7415, 7527, 7639, 8090, 8202, 8427, 8539, 8877, 8989, 9101, 9439, 9861, 9973, 10085, 10197, 10309, 10647, 10759, 10871, 11209, 11648, 11760, 11872, 12210, 12657]) = 2*X11(7)*u11(5)-2*u11(3)/u11(4)*u11(6)+2*u11(6)*X11(8);
	M([7454, 9676, 10127, 10239, 10351, 10463, 10575, 10800, 10912, 11024, 11136, 11248, 11360, 11443, 11555, 11667, 11779, 11891, 12003, 12115, 12227, 12339, 12439, 12551, 12663, 12775, 12883]) = u11(6)-X11(7)*u11(6)+u11(5)*X11(8);
	M([226, 677, 789, 1240, 1886, 2224, 2449, 3239, 3351, 3689, 4592, 6587, 6925, 7715, 9610]) = -u11(8)*X11(12);
	M([339, 790, 902, 1353, 2112, 2450, 2675, 3578, 3690, 4028, 4931, 6926, 7151, 8054, 9836]) = 2*u11(8)*X11(10);
	M([452, 903, 1015, 1466, 2338, 2676, 2901, 3917, 4029, 4254, 5157, 7152, 7377, 8280, 10062]) = u11(8)*X11(12);
	M([1017, 1355, 1467, 1692, 3581, 4032, 4257, 4821, 4933, 5158, 5722, 8056, 8281, 8845, 10627]) = 2*u11(8)*X11(11);
	M([1469, 1581, 1693, 1805, 4936, 5161, 5498, 5723, 6061, 8621, 8846, 9184, 10966]) = -u11(8)*X11(12);
	M([2712, 3728, 4066, 4969, 6519, 6970, 7195, 7758, 8096, 8660, 9638, 9863, 10427, 11418]) = 2*u11(8)*X11(11);
	M([2825, 3841, 4179, 5082, 6632, 7083, 7308, 7759, 7871, 8209, 8773, 9751, 9976, 10540, 11531]) = -u11(8)+X11(11);
	M([3164, 4406, 4518, 5421, 7197, 7535, 7647, 8324, 8436, 8548, 9112, 10203, 10315, 10879, 11870]) = X11(11)+u11(8);
	M([4294, 4971, 5196, 5760, 8100, 8325, 8662, 8887, 9225, 10429, 10654, 10992, 11983]) = -2*u11(8)*X11(10);
	M([4407, 5084, 5309, 5873, 7762, 8213, 8438, 8663, 8775, 9000, 9338, 10542, 10767, 11105, 12096]) = -2*X11(10)+2*u11(3)/u11(4)*u11(8);
	M([4520, 5310, 5422, 5986, 8101, 8439, 8551, 8889, 9001, 9113, 9451, 10768, 10880, 11218, 12209]) = -2*X11(12);
	M([5424, 5875, 5987, 6325, 8666, 9004, 9116, 9228, 9340, 9452, 9564, 11107, 11219, 11331, 12322]) = u11(8)-X11(11);
	M([7458, 8135, 8360, 8924, 9908, 10133, 10470, 10695, 11033, 11446, 11671, 12009, 12435]) = u11(8)*X11(12);
	M([7571, 8248, 8473, 9037, 9683, 10021, 10246, 10471, 10583, 10808, 11146, 11559, 11784, 12122, 12548]) = 2*X11(12);
	M([7684, 8474, 8586, 9150, 9909, 10247, 10359, 10697, 10809, 10921, 11259, 11785, 11897, 12235, 12661]) = -2*X11(10)+2*u11(3)/u11(4)*u11(8);
	M([10396, 10847, 10959, 11297, 11491, 11829, 11941, 12053, 12165, 12277, 12389, 12576, 12688, 12800, 12887]) = -X11(11)-u11(8);
	M([2573, 2798, 3362, 3813, 4151, 4602, 4714, 5052, 5616, 6595, 6933, 7045, 7270, 7721, 7833, 8171, 8735, 9618, 9730, 9955, 10519, 11528]) = -u11(8)*X11(10)-X11(11)*u11(7)+u11(8);
	M([2799, 3024, 3701, 4152, 4377, 4941, 5053, 5278, 5842, 6934, 7159, 7271, 7496, 8060, 8172, 8397, 8961, 9844, 9956, 10181, 10745, 11754]) = -2*u11(8)*X11(12);
	M([3025, 3137, 4040, 4378, 4490, 5167, 5279, 5391, 5955, 7160, 7385, 7497, 7609, 8286, 8398, 8510, 9074, 10070, 10182, 10294, 10858, 11867]) = -u11(8)-X11(11)*u11(7)+u11(8)*X11(10);
	M([4155, 4380, 4605, 5056, 5281, 5506, 5618, 5843, 6181, 7725, 8063, 8175, 8400, 8625, 8737, 8962, 9300, 10409, 10521, 10746, 11084, 12093]) = -2*u11(3)/u11(4)*u11(8)+2*X11(10)*u11(7)-2*u11(8)*X11(11);
	M([4381, 4493, 4944, 5282, 5394, 5732, 5844, 5956, 6294, 8064, 8289, 8401, 8513, 8851, 8963, 9075, 9413, 10635, 10747, 10859, 11197, 12206]) = 2*X11(12)*u11(7);
	M([5285, 5397, 5509, 5847, 5959, 6071, 6183, 6295, 6407, 8629, 8854, 8966, 9078, 9190, 9302, 9414, 9526, 10974, 11086, 11198, 11310, 12319]) = -u11(8)+u11(8)*X11(10)+X11(11)*u11(7);
	M([7319, 7544, 7769, 8220, 8445, 8670, 8782, 9007, 9345, 9646, 9871, 9983, 10208, 10433, 10545, 10770, 11108, 11426, 11538, 11763, 12101, 12545]) = -2*X11(12)*u11(7);
	M([7545, 7657, 8108, 8446, 8558, 8896, 9008, 9120, 9458, 9872, 10097, 10209, 10321, 10659, 10771, 10883, 11221, 11652, 11764, 11876, 12214, 12658]) = 2*X11(10)*u11(7)+2*u11(8)*X11(11)-2*u11(3)/u11(4)*u11(8);
	M([8449, 8561, 8673, 9011, 9123, 9235, 9347, 9459, 9571, 10437, 10662, 10774, 10886, 10998, 11110, 11222, 11334, 11991, 12103, 12215, 12327, 12771]) = -2*u11(8)*X11(12);
	M([10257, 10369, 10481, 10819, 10931, 11043, 11155, 11267, 11379, 11454, 11679, 11791, 11903, 12015, 12127, 12239, 12351, 12443, 12555, 12667, 12779, 12884]) = u11(8)+X11(11)*u11(7)-u11(8)*X11(10);

	Mr = gj(M);  % replace me with a MEX

    a = -Mr(111, 115);
    b = -Mr(111, 114);
    c = -Mr(107, 115);
    d = -Mr(107, 114);

    %l^2 + (-a-d)*l + (a*d-b*c) = 0;
    D = - 4*(a*d-b*c);
    if (D < 0)
		w = [];
		b = [];
		d = [];
		c = [];
        return;
    end
    % w b d c 1 
    w = sqrt(D)/2;
    
    c = (-Mr(end-2, end)-w)/Mr(end-2, end-1);
    d = - Mr(end,   end) - c*Mr(end,   end-1);
    b = - Mr(end-1, end) - c*Mr(end-1, end-1);
end
