% Generated using GBSolver generator v1.1 Copyright Martin Bujnak,
% Zuzana Kukelova, Tomas Pajdla CTU Prague 2008.
% 
% Please refer to the following paper, when using this code :
%     Kukelova Z., Bujnak M., Pajdla T., Automatic Generator of Minimal Problem Solvers,
%     ECCV 2008, Marseille, France, October 12-18, 2008

function [a3 a2 a1 meta M] = mbp4pf_np_7036(Pa1, Pb1, Pc1, Pd1)

	% instance=pfpf_DAC_nullspace_inst gbordering={a3,a2,a1} solverordering={a3,a2,a1} equations={1,2,3} basis={1,a3,a3*a1,a2,a2*a1,a1,a1^2,a1^3} 
	% gj = 0
	meta = {0, {'pfpf_DAC_nullspace_inst'}, {'a3' 'a2' 'a1'}, {'a3' 'a2' 'a1'}, {1,2,3}, {'1' 'a3' 'a3*a1' 'a2' 'a2*a1' 'a1' 'a1^2' 'a1^3'} };

	%monomials appearing in matrix M:
	%    a2*a3^3 a2^2*a3^2 a2^3*a3 a2^4 a1*a3^3 a1*a2*a3^2 a1*a2^2*a3 a1*a2^3 a1^2*a3^2 a1^2*a2*a3 a1^2*a2^2 
	%    a1^3*a3 a1^3*a2 a1^4 a3^3 a2*a3^2 a2^2*a3 a2^3 a1*a3^2 a1*a2*a3 a1*a2^2 a1^2*a3 
	%    a1^2*a2 a1^3 a3^2 a2*a3 a2^2 a1*a3 a1*a2 a1^2 a3 a2 a1 
	%    1 
	M = zeros(26, 34);
	M([17, 42, 119, 144, 221, 370, 395, 472, 625]) = -Pc1(5)^2-Pc1(6)^2-Pc1(7)^2+Pc1(3)^2+Pc1(1)^2+Pc1(2)^2;
	M([43, 68, 145, 170, 247, 396, 421, 498, 651]) = 2*Pc1(1)*Pb1(1)+2*Pc1(2)*Pb1(2)+2*Pc1(3)*Pb1(3)-2*Pc1(5)*Pb1(5)-2*Pc1(6)*Pb1(6)-2*Pc1(7)*Pb1(7);
	M([69, 94, 171, 196, 273, 422, 447, 524, 677]) = -Pb1(5)^2-Pb1(6)^2-Pb1(7)^2+Pb1(1)^2+Pb1(2)^2+Pb1(3)^2;
	M([147, 172, 223, 248, 299, 474, 499, 550, 703]) = -2*Pc1(6)*Pa1(6)-2*Pc1(7)*Pa1(7)+2*Pc1(1)*Pa1(1)+2*Pc1(2)*Pa1(2)+2*Pc1(3)*Pa1(3)-2*Pc1(5)*Pa1(5);
	M([173, 198, 249, 274, 325, 500, 525, 576, 729]) = -2*Pa1(5)*Pb1(5)+2*Pa1(1)*Pb1(1)-2*Pb1(6)*Pa1(6)-2*Pb1(7)*Pa1(7)+2*Pa1(3)*Pb1(3)+2*Pa1(2)*Pb1(2);
	M([251, 276, 301, 326, 351, 552, 577, 602, 755]) = -Pa1(7)^2+Pa1(1)^2+Pa1(2)^2+Pa1(3)^2-Pa1(5)^2-Pa1(6)^2;
	M([407, 432, 483, 508, 559, 630, 655, 706, 781]) = 2*Pc1(1)*Pd1(1)+2*Pc1(2)*Pd1(2)+2*Pc1(3)*Pd1(3)-2*Pc1(5)*Pd1(5)-2*Pc1(6)*Pd1(6)-2*Pc1(7)*Pd1(7);
	M([433, 458, 509, 534, 585, 656, 681, 732, 807]) = 2*Pd1(2)*Pb1(2)+2*Pd1(1)*Pb1(1)-2*Pd1(5)*Pb1(5)+2*Pd1(3)*Pb1(3)-2*Pd1(7)*Pb1(7)-2*Pb1(6)*Pd1(6);
	M([511, 536, 561, 586, 611, 708, 733, 758, 833]) = -2*Pa1(6)*Pd1(6)+2*Pd1(2)*Pa1(2)+2*Pd1(1)*Pa1(1)-2*Pd1(7)*Pa1(7)+2*Pd1(3)*Pa1(3)-2*Pa1(5)*Pd1(5);
	M([667, 692, 717, 742, 767, 786, 811, 836, 859]) = Pd1(1)^2+Pd1(2)^2+Pd1(3)^2-Pd1(5)^2-Pd1(6)^2-Pd1(7)^2;
	M([22, 47, 124, 149, 226, 373, 398, 475, 626]) = Pc1(3)*Pc1(7)+Pc1(1)*Pc1(5)+Pc1(2)*Pc1(6);
	M([48, 73, 150, 175, 252, 399, 424, 501, 652]) = Pc1(5)*Pb1(1)+Pc1(1)*Pb1(5)+Pc1(6)*Pb1(2)+Pc1(2)*Pb1(6)+Pc1(7)*Pb1(3)+Pc1(3)*Pb1(7);
	M([74, 99, 176, 201, 278, 425, 450, 527, 678]) = Pb1(7)*Pb1(3)+Pb1(5)*Pb1(1)+Pb1(6)*Pb1(2);
	M([152, 177, 228, 253, 304, 477, 502, 553, 704]) = Pc1(5)*Pa1(1)+Pc1(1)*Pa1(5)+Pc1(6)*Pa1(2)+Pc1(2)*Pa1(6)+Pc1(3)*Pa1(7)+Pc1(7)*Pa1(3);
	M([178, 203, 254, 279, 330, 503, 528, 579, 730]) = Pa1(1)*Pb1(5)+Pa1(5)*Pb1(1)+Pb1(6)*Pa1(2)+Pa1(6)*Pb1(2)+Pb1(7)*Pa1(3)+Pa1(7)*Pb1(3);
	M([256, 281, 306, 331, 356, 555, 580, 605, 756]) = Pa1(2)*Pa1(6)+Pa1(3)*Pa1(7)+Pa1(5)*Pa1(1);
	M([412, 437, 488, 513, 564, 633, 658, 709, 782]) = Pc1(2)*Pd1(6)+Pc1(3)*Pd1(7)+Pd1(2)*Pc1(6)+Pd1(1)*Pc1(5)+Pc1(1)*Pd1(5)+Pd1(3)*Pc1(7);
	M([438, 463, 514, 539, 590, 659, 684, 735, 808]) = Pd1(5)*Pb1(1)+Pd1(6)*Pb1(2)+Pd1(2)*Pb1(6)+Pd1(1)*Pb1(5)+Pd1(7)*Pb1(3)+Pd1(3)*Pb1(7);
	M([516, 541, 566, 591, 616, 711, 736, 761, 834]) = Pd1(2)*Pa1(6)+Pd1(7)*Pa1(3)+Pd1(3)*Pa1(7)+Pd1(1)*Pa1(5)+Pa1(2)*Pd1(6)+Pa1(1)*Pd1(5);
	M([672, 697, 722, 747, 772, 789, 814, 839, 860]) = Pd1(1)*Pd1(5)+Pd1(2)*Pd1(6)+Pd1(3)*Pd1(7);
	M([52, 129, 154, 231, 376, 401, 478, 627]) = Pc1(3)*Pc1(11)+Pc1(1)*Pc1(9)+Pc1(2)*Pc1(10);
	M([78, 155, 180, 257, 402, 427, 504, 653]) = Pc1(3)*Pb1(11)+Pc1(10)*Pb1(2)+Pc1(11)*Pb1(3)+Pc1(9)*Pb1(1)+Pc1(1)*Pb1(9)+Pc1(2)*Pb1(10);
	M([104, 181, 206, 283, 428, 453, 530, 679]) = Pb1(11)*Pb1(3)+Pb1(10)*Pb1(2)+Pb1(9)*Pb1(1);
	M([182, 233, 258, 309, 480, 505, 556, 705]) = Pa1(1)*Pc1(9)+Pa1(2)*Pc1(10)+Pc1(2)*Pa1(10)+Pa1(3)*Pc1(11)+Pc1(1)*Pa1(9)+Pc1(3)*Pa1(11);
	M([208, 259, 284, 335, 506, 531, 582, 731]) = Pa1(2)*Pb1(10)+Pa1(10)*Pb1(2)+Pa1(3)*Pb1(11)+Pb1(9)*Pa1(1)+Pa1(9)*Pb1(1)+Pa1(11)*Pb1(3);
	M([286, 311, 336, 361, 558, 583, 608, 757]) = Pa1(3)*Pa1(11)+Pa1(2)*Pa1(10)+Pa1(9)*Pa1(1);
	M([442, 493, 518, 569, 636, 661, 712, 783]) = Pc1(1)*Pd1(9)+Pc1(2)*Pd1(10)+Pd1(1)*Pc1(9)+Pc1(3)*Pd1(11)+Pd1(2)*Pc1(10)+Pd1(3)*Pc1(11);
	M([468, 519, 544, 595, 662, 687, 738, 809]) = Pd1(9)*Pb1(1)+Pd1(2)*Pb1(10)+Pd1(1)*Pb1(9)+Pd1(11)*Pb1(3)+Pd1(10)*Pb1(2)+Pd1(3)*Pb1(11);
	M([546, 571, 596, 621, 714, 739, 764, 835]) = Pa1(2)*Pd1(10)+Pd1(2)*Pa1(10)+Pa1(3)*Pd1(11)+Pd1(3)*Pa1(11)+Pd1(1)*Pa1(9)+Pa1(1)*Pd1(9);
	M([702, 727, 752, 777, 792, 817, 842, 861]) = Pd1(1)*Pd1(9)+Pd1(2)*Pd1(10)+Pd1(3)*Pd1(11);

	Mr = rref(M);  % replace me with a MEX

	A = zeros(8);
	amcols = [34 33 32 31 30 29 28 24];
	A(1, 4) = 1;
	A(2, 7) = 1;
	A(3, :) = -Mr(25, amcols);
	A(4, :) = -Mr(24, amcols);
	A(5, :) = -Mr(22, amcols);
	A(6, :) = -Mr(20, amcols);
	A(7, :) = -Mr(19, amcols);
	A(8, :) = -Mr(12, amcols);

	% generated for action variable 'a3'
	% action matrix monomials: 1 a1 a2 a3 a1^2 a2*a1 a3*a1 a1^3
	[V D] = eig(A);

    	nonzero = find( abs(V(1,:)) > eps);
	sol =  V([4, 3, 2],nonzero)./(ones(3, 1)*V(1,nonzero));
%	sol =  V([4, 3, 2],:)./(ones(3, 1)*V(1,:));

	if (find(isnan(sol(:))) > 0)
		
		a3 = [];
		a2 = [];
		a1 = [];
	else
		
		I = find(not(imag( sol(1,:) )));
		a3 = sol(1,I);
		a2 = sol(2,I);
		a1 = sol(3,I);
	end
end
