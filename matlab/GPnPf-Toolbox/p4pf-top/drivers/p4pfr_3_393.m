% Generated using GBSolver generator v1.1 Copyright Martin Bujnak,
% Zuzana Kukelova, Tomas Pajdla CTU Prague 2008.
% 
% Please refer to the following paper, when using this code :
%     Kukelova Z., Bujnak M., Pajdla T., Automatic Generator of Minimal Problem Solvers,
%     ECCV 2008, Marseille, France, October 12-18, 2008

function [zb zc zd f meta M] = mbp4pf_317_11__1zbzbzczbzdzbfzczc2zczdzcfzdzd2zdfff2(glab, a1, b1, c1, d1)

	% instance=mbp4pftest_inst ordering={zb,zc,zd,f} equations={} basis={1,zb,zb*zc,zb*zd,zb*f,zc,zc^2,zc*zd,zc*f,zd,zd^2,zd*f,f,f^2} 
	% gj = 1 subst = 1
	meta = {1,1, {'mbp4pftest_inst'}, {'zb' 'zc' 'zd' 'f'}, {}, {'1' 'zb' 'zb*zc' 'zb*zd' 'zb*f' 'zc' 'zc^2' 'zc*zd' 'zc*f' 'zd' 'zd^2' 'zd*f' 'f' 'f^2'} };

	%monomials appearing in matrix M:
	%    f^3*zc*zb^2 f^3*zc^2*zb f^3*zd*zb^2 f^3*zd*zc*zb f^3*zd*zc^2 f^3*zd^2*zb f^3*zd^2*zc f^3*zd^3 f*zc^2*zb^2 f*zd*zc*zb^2 f*zd*zc^2*zb 
	%    f*zd^2*zb^2 f*zd^2*zc*zb f*zd^2*zc^2 f*zd^3*zb f*zd^3*zc f*zd^4 f^2*zc*zb^2 f^2*zc^2*zb f^2*zd*zb^2 f^2*zd*zc*zb f^2*zd*zc^2 
	%    f^2*zd^2*zb f^2*zd^2*zc f^2*zd^3 f^3*zb^2 f^3*zc*zb f^3*zc^2 f^3*zd*zb f^3*zd*zc zc^2*zb^2 zd*zc*zb^2 zd*zc^2*zb 
	%    zd^2*zb^2 zd^2*zc*zb zd^2*zc^2 f*zc*zb^2 f*zc^2*zb f*zd*zb^2 f*zd*zc*zb f*zd*zc^2 f*zd^2*zb f*zd^2*zc f*zd^3 
	%    f^2*zb^2 f^2*zc*zb f^2*zc^2 f^2*zd*zb f^2*zd*zc f^2*zd^2 zc*zb^2 zc^2*zb zd*zb^2 zd*zc*zb zd*zc^2 
	%    zd^2*zb zd^2*zc f*zb^2 f*zc*zb f*zc^2 f*zd*zb f*zd*zc f*zd^2 f^2*zb f^2*zc f^2*zd 
	%    zb^2 zc*zb zc^2 zd*zb zd*zc zd^2 f*zb f*zc f*zd f^2 zb 
	%    zc zd f 1 
	M = zeros(67, 81);
	M([57, 190, 565, 631, 764, 1165, 1298, 1699, 2420, 2553, 2954, 3820]) = 1;
	M([459, 525, 900, 1033, 1099, 1567, 1633, 2822, 2888, 3289, 4155]) = -1/glab(3)*glab(1);
	M([1196, 1329, 2039, 2105, 2238, 2438, 2571, 2972, 3358, 3491, 3825, 4423]) = b1(2)^2+b1(1)^2;
	M([1598, 1664, 2374, 2840, 2906, 3307, 3760, 4160, 4758]) = -d1(2)^2/glab(3)*glab(1)-d1(1)^2/glab(3)*glab(1);
	M([1799, 1932, 2508, 2641, 2774, 3041, 3174, 3894, 4027, 4227, 4825]) = -2;
	M([2000, 2709, 2842, 2908, 3242, 3308, 4095, 4161, 4361, 4959]) = 2/glab(3)*glab(1);
	M([3072, 3205, 3446, 3579, 3712, 3912, 4045, 4245, 4497, 4630, 4830, 5093]) = -2*b1(1)*a1(1)-2*b1(2)*a1(2);
	M([3273, 3339, 3647, 3780, 4113, 4179, 4379, 4698, 4764, 4964, 5227]) = 2*a1(2)*d1(2)/glab(3)*glab(1)+2*a1(1)*d1(1)/glab(3)*glab(1);
	M([3982, 4115, 4181, 4314, 4380, 4899, 4965, 5031, 5294]) = 1-1/glab(3)*glab(1);
	M([4345, 4411, 4585, 4718, 4784, 4917, 4983, 5049, 5167, 5233, 5299, 5361]) = a1(2)^2-a1(1)^2/glab(3)*glab(1)-a1(2)^2/glab(3)*glab(1)+a1(1)^2;
	M([60, 126, 259, 573, 639, 705, 838, 1172, 1238, 1371, 1772, 2424, 2490, 2623, 3024, 3888]) = 1;
	M([395, 461, 527, 841, 974, 1040, 1106, 1507, 1573, 1639, 2759, 2825, 2891, 3292, 4156]) = -1/2/glab(3)*glab(1)+1/2/glab(3)*glab(4)-1/2/glab(3)*glab(2);
	M([1199, 1265, 1398, 2047, 2113, 2179, 2312, 2445, 2511, 2644, 3045, 3362, 3428, 3561, 3895, 4491]) = c1(1)*b1(1)+c1(2)*b1(2);
	M([1534, 1600, 1666, 2315, 2780, 2846, 2912, 3313, 3697, 3763, 4163, 4759]) = -1/2*d1(2)^2/glab(3)*glab(1)-1/2*d1(1)^2/glab(3)*glab(1)-1/2*d1(2)^2/glab(3)*glab(2)+1/2*d1(1)^2/glab(3)*glab(4)+1/2*d1(2)^2/glab(3)*glab(4)-1/2*d1(1)^2/glab(3)*glab(2);
	M([1735, 1801, 1934, 2449, 2582, 2648, 2781, 2981, 3047, 3180, 3831, 3897, 4030, 4230, 4826]) = -1;
	M([1802, 1868, 2001, 2516, 2649, 2715, 2848, 3048, 3114, 3247, 3898, 3964, 4097, 4297, 4893]) = -1;
	M([1936, 2002, 2650, 2783, 2849, 2915, 3182, 3248, 3314, 4032, 4098, 4164, 4364, 4960]) = -1/glab(3)*glab(4)+1/glab(3)*glab(2)+1/glab(3)*glab(1);
	M([3008, 3074, 3207, 3387, 3520, 3586, 3719, 3852, 3918, 4051, 4251, 4434, 4500, 4633, 4833, 5094]) = -b1(1)*a1(1)-b1(2)*a1(2);
	M([3075, 3141, 3274, 3454, 3587, 3653, 3786, 3919, 3985, 4118, 4318, 4501, 4567, 4700, 4900, 5161]) = -c1(2)*a1(2)-c1(1)*a1(1);
	M([3209, 3275, 3341, 3588, 3721, 3787, 4053, 4119, 4185, 4385, 4635, 4701, 4767, 4967, 5228]) = a1(2)*d1(2)/glab(3)*glab(2)-a1(2)*d1(2)/glab(3)*glab(4)+a1(1)*d1(1)/glab(3)*glab(2)+a1(1)*d1(1)/glab(3)*glab(1)+a1(2)*d1(2)/glab(3)*glab(1)-a1(1)*d1(1)/glab(3)*glab(4);
	M([3923, 4056, 4122, 4188, 4254, 4320, 4386, 4836, 4902, 4968, 5034, 5295]) = 1/2/glab(3)*glab(4)-1/2/glab(3)*glab(2)-1/2/glab(3)*glab(1)+1;
	M([4281, 4347, 4413, 4526, 4659, 4725, 4791, 4857, 4923, 4989, 5055, 5104, 5170, 5236, 5302, 5362]) = -1/2*a1(2)^2/glab(3)*glab(1)+a1(2)^2+a1(1)^2-1/2*a1(1)^2/glab(3)*glab(1)+1/2*a1(2)^2/glab(3)*glab(4)-1/2*a1(2)^2/glab(3)*glab(2)-1/2*a1(1)^2/glab(3)*glab(2)+1/2*a1(1)^2/glab(3)*glab(4);
	M([129, 329, 579, 712, 912, 1246, 1446, 1847, 2494, 2694, 3095, 3956]) = 1;
	M([397, 530, 780, 980, 1113, 1514, 1647, 2762, 2895, 3296, 4157]) = -1/glab(3)*glab(2);
	M([1268, 1468, 2053, 2186, 2386, 2519, 2719, 3120, 3432, 3632, 3966, 4559]) = c1(1)^2+c1(2)^2;
	M([1536, 1669, 2254, 2787, 2920, 3321, 3700, 4167, 4760]) = -d1(1)^2/glab(3)*glab(2)-d1(2)^2/glab(3)*glab(2);
	M([1804, 2004, 2455, 2655, 2855, 3055, 3255, 3901, 4101, 4301, 4894]) = -2;
	M([1938, 2589, 2789, 2922, 3189, 3322, 4035, 4168, 4368, 4961]) = 2/glab(3)*glab(2);
	M([3077, 3277, 3393, 3593, 3793, 3926, 4126, 4326, 4504, 4704, 4904, 5162]) = -2*c1(2)*a1(2)-2*c1(1)*a1(1);
	M([3211, 3344, 3527, 3727, 4060, 4193, 4393, 4638, 4771, 4971, 5229]) = 2*a1(1)*d1(1)/glab(3)*glab(2)+2*a1(2)*d1(2)/glab(3)*glab(2);
	M([3862, 4062, 4195, 4261, 4394, 4839, 4972, 5038, 5296]) = 1-1/glab(3)*glab(2);
	M([4283, 4416, 4465, 4665, 4798, 4864, 4997, 5063, 5107, 5240, 5306, 5363]) = -a1(2)^2/glab(3)*glab(2)-a1(1)^2/glab(3)*glab(2)+a1(2)^2+a1(1)^2;
	M([199, 265, 398, 654, 720, 786, 852, 1320, 1386, 1519, 1920, 2565, 2631, 2764, 3165, 4024]) = 1;
	M([400, 466, 532, 855, 921, 987, 1053, 1521, 1587, 1653, 2766, 2832, 2898, 3299, 4158]) = 1/2*glab(5)/glab(3)-1/2-1/2/glab(3)*glab(1);
	M([1338, 1404, 1537, 2128, 2194, 2260, 2326, 2593, 2659, 2792, 3193, 3503, 3569, 3702, 4036, 4627]) = d1(1)*b1(1)+d1(2)*b1(2);
	M([1539, 1605, 1671, 2329, 2395, 2794, 2860, 2926, 3327, 3704, 3770, 4170, 4761]) = -1/2*d1(1)^2/glab(3)*glab(1)-1/2*d1(1)^2-1/2*d1(2)^2-1/2*d1(2)^2/glab(3)*glab(1)+1/2*d1(2)^2*glab(5)/glab(3)+1/2*d1(1)^2*glab(5)/glab(3);
	M([1740, 1806, 1939, 2463, 2529, 2595, 2661, 2995, 3061, 3194, 3838, 3904, 4037, 4237, 4828]) = -1;
	M([1941, 2007, 2664, 2730, 2796, 2862, 3196, 3262, 3328, 4039, 4105, 4171, 4371, 4962]) = -glab(5)/glab(3)+1/glab(3)*glab(1);
	M([3013, 3079, 3212, 3401, 3467, 3533, 3599, 3866, 3932, 4065, 4265, 4441, 4507, 4640, 4840, 5096]) = -b1(1)*a1(1)-b1(2)*a1(2);
	M([3214, 3280, 3346, 3602, 3668, 3734, 3800, 4067, 4133, 4199, 4399, 4642, 4708, 4774, 4974, 5230]) = a1(2)*d1(2)/glab(3)*glab(1)+a1(1)*d1(1)/glab(3)*glab(1)-a1(1)*d1(1)*glab(5)/glab(3)-a1(2)*d1(2)*glab(5)/glab(3);
	M([3937, 4003, 4069, 4135, 4268, 4334, 4400, 4843, 4909, 4975, 5041, 5297]) = -1/2/glab(3)*glab(1)+1/2*glab(5)/glab(3)+1/2;
	M([4286, 4352, 4418, 4540, 4606, 4672, 4738, 4871, 4937, 5003, 5069, 5111, 5177, 5243, 5309, 5364]) = -1/2*a1(2)^2/glab(3)*glab(1)+1/2*a1(2)^2+1/2*a1(1)^2-1/2*a1(1)^2/glab(3)*glab(1)+1/2*a1(1)^2*glab(5)/glab(3)+1/2*a1(2)^2*glab(5)/glab(3);
	M([335, 468, 859, 925, 1594, 1995, 2636, 2702, 2835, 3236, 4092]) = 1;
	M([469, 535, 993, 1059, 1661, 2770, 2836, 2902, 3303, 4159]) = -1/2/glab(3)*glab(2)-1/2+1/2/glab(3)*glab(6);
	M([1474, 1607, 2333, 2399, 2867, 3268, 3574, 3640, 3773, 4107, 4695]) = c1(2)*d1(2)+c1(1)*d1(1);
	M([1608, 1674, 2934, 3335, 3708, 3774, 4174, 4762]) = -1/2*d1(1)^2/glab(3)*glab(2)-1/2*d1(2)^2-1/2*d1(2)^2/glab(3)*glab(2)+1/2*d1(2)^2/glab(3)*glab(6)+1/2*d1(1)^2/glab(3)*glab(6)-1/2*d1(1)^2;
	M([1876, 2009, 2668, 2734, 3269, 3909, 3975, 4108, 4308, 4896]) = -1;
	M([2010, 2802, 2868, 3336, 4043, 4109, 4175, 4375, 4963]) = 1/glab(3)*glab(2)-1/glab(3)*glab(6);
	M([3149, 3282, 3606, 3672, 4140, 4340, 4512, 4578, 4711, 4911, 5164]) = -c1(2)*a1(2)-c1(1)*a1(1);
	M([3283, 3349, 3740, 3806, 4207, 4407, 4646, 4712, 4778, 4978, 5231]) = -a1(1)*d1(1)/glab(3)*glab(6)+a1(2)*d1(2)/glab(3)*glab(2)-a1(2)*d1(2)/glab(3)*glab(6)+a1(1)*d1(1)/glab(3)*glab(2);
	M([4075, 4141, 4408, 4847, 4913, 4979, 5045, 5298]) = 1/2+1/2/glab(3)*glab(6)-1/2/glab(3)*glab(2);
	M([4355, 4421, 4678, 4744, 5011, 5077, 5115, 5181, 5247, 5313, 5365]) = 1/2*a1(2)^2+1/2*a1(1)^2-1/2*a1(2)^2/glab(3)*glab(2)-1/2*a1(1)^2/glab(3)*glab(2)+1/2*a1(2)^2/glab(3)*glab(6)+1/2*a1(1)^2/glab(3)*glab(6);

	Mr = rref(M);  % replace me with a MEX

	A = zeros(14);
	amcols = [81 80 79 78 77 76 75 74 73 72 71 70 69 68];
	A(1, 5) = 1;
	A(2, 9) = 1;
	A(3, 12) = 1;
	A(4, 14) = 1;
	A(5, :) = -Mr(67, amcols);
	A(6, :) = -Mr(64, amcols);
	A(7, :) = -Mr(61, amcols);
	A(8, :) = -Mr(59, amcols);
	A(9, :) = -Mr(58, amcols);
	A(10, :) = -Mr(56, amcols);
	A(11, :) = -Mr(54, amcols);
	A(12, :) = -Mr(53, amcols);
	A(13, :) = -Mr(52, amcols);
	A(14, :) = -Mr(51, amcols);

	% generated for action variable 'zb'
	% action matrix monomials: 1 f zd zc zb f^2 zd*f zc*f zb*f zd^2 zc*zd zb*zd zc^2 zb*zc
	[V D] = eig(A);
	sol =  V([5, 4, 3, 2],:)./(ones(4, 1)*V(1,:));

	if (find(isnan(sol(:))) > 0)
		
		zb = [];
		zc = [];
		zd = [];
		f = [];
	else
		
		I = find(not(imag( sol(1,:) )));
		zb = sol(1,I);
		zc = sol(2,I);
		zd = sol(3,I);
		f = sol(4,I);
	end
end
